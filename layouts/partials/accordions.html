
<div class="accordions">
  <h2>2020 Federal Elections Dates & Deadlines</h2>
  <!-- <h1>Styling is red with widescreen</h1> -->
  <button onclick="closeAccordion(b)" id="b" class="usa-button usa-button--outline">Open All</button>
  <div class="usa-accordion usa-accordion--bordered" aria-multiselectable="true">
    <div id="deadlines"></div>
      <script type="text/javascript">
        var stateObj = {{ index .Site.Data.dates2 (.Params.title | lower ) }}
        var stateDates = stateObj.important_dates
        for (var i = 0; i < stateDates.length; i++) {
          var eventName = stateDates[i].date_type;
          var eventDate = stateDates[i].date;
          //1. Create header
          var li = document.createElement('h2');
          li.innerHTML = eventName;
          li.classList.add('usa-accordion__heading');
          li.classList.add('usa-accordion__button');
          li.setAttribute('aria-expanded', 'false');
          //Name aria control attribute based on order in for loop
          li.setAttribute('aria-controls', 'b-a' + i);
          document.getElementById('deadlines').appendChild(li);
          //2. Create dropdown
          var date = document.createElement('div');
          date.innerHTML = eventDate;
          date.classList.add('usa-accordion__content');
          date.classList.add('usa-prose');
          date.setAttribute('id', 'b-a' + i);
          document.getElementById('deadlines').appendChild(date);
      }

      function closeAccordion() {
        var accordions = document.querySelectorAll('h2');
        console.log(accordions);
        event.preventDefault();
        for (var i = 0; i < accordions.length; i++) {
          var header = accordions[i];
          header.setAttribute('aria-expanded', 'true');
          var dropdown = document.getElementById('b-a' + i);
          console.log(dropdown);
          dropdown.removeAttribute('hidden');
        }
        b.textContent = "HI";
      }

    </script>
  </div>
  </div>
</div>
